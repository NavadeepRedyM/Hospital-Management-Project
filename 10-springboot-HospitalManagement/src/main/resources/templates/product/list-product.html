	<!DOCTYPE html>
	<html xmlns:th="http://www.thymeleaf.org">
	<head>
<meta charset="UTF-8">
<title>Product List</title>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
	<body class="bg-light">
	
	<div class="container mt-5">
	    <div class="card shadow">
	        <div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
	            <h2 class="mb-0">Product List</h2>
	            <a th:href="@{/api/add}" class="btn btn-primary btn-sm">Add New Product</a>
	        </div>
	        
	        <div class="card-body">
	            <!-- Filter Section -->
	            <div class="row mb-4">
	                <div class="col-md-6 offset-md-6">
	                    <form th:action="@{/api/list}" method="get">
	                        <div class="input-group">
	                            <label class="input-group-text" for="categoryFilter">Filter by Category:</label>
	                            <select name="categoryId" id="categoryFilter" class="form-select" onchange="this.form.submit()">
	                                <option value="0">All Categories</option>
	                                <option th:each="cat : ${categories}" 
	                                        th:value="${cat.id}" 
	                                        th:text="${cat.name}"
	                                        th:selected="${cat.id == selectedCatId}">
	                                </option>
	                            </select>
	                        </div>
	                    </form>
	                </div>
	            </div>
	
	            <!-- Table Section -->
	            <div class="table-responsive">
	                <table class="table table-bordered table-striped table-hover align-middle">
	                    <thead class="table-dark">
	                        <tr>
	                            <th style="width: 10%;">ID</th>
	                            <th style="width: 30%;">Name</th>
	                            <th style="width: 20%;">Price</th>
	                            <th style="width: 20%;">Category</th>
	                            <th style="width: 20%;" class="text-center">Actions</th>
	                        </tr>
	                    </thead>
	                    <tbody>
	                        <!-- Loop through products -->
	                        <tr th:each="product : ${products}">
	                            <td th:text="${product.pid}"></td>
	                            <td th:text="${product.name}"></td>
	                            <td th:text="${product.price}"></td>
	                            <!-- Safe Navigation Operator handles products with no category -->
	                            <td th:text="${product.category?.name} ?: 'Uncategorized'"></td>
	                            <td class="text-center">
	                                <div class="btn-group" role="group">
	                                    <a th:href="@{'/api/edit/' + ${product.pid}}" 
	                                       class="btn btn-warning btn-sm">Edit</a>
	                                    
	                                    <a th:href="@{'/api/delete/' + ${product.pid}}" 
	                                       class="btn btn-danger btn-sm">
	                                       Delete
	                                    </a>
	                                </div>
	                            </td>	
	                        </tr>
	                        <!-- Empty state if no products found -->
	                        <tr th:if="${#lists.isEmpty(products)}">
	                            <td colspan="5" class="text-center text-muted py-4">No products found.</td>
	                        </tr>
	                    </tbody>
	                </table>
	            </div>
	        </div>
	    </div>
	</div>
	
	<!-- Bootstrap JS Bundle -->
	<script src="cdn.jsdelivr.net"></script>
	
	</body>
	</html>
