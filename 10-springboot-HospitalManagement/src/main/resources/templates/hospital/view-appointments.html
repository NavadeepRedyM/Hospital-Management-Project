<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Appointments List</title>
 
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f6f8;
            padding: 30px;
        }
 
        h2 {
            margin-bottom: 20px;
        }
 
        .back-link {
            display: inline-block;
            margin-bottom: 15px;
            text-decoration: none;
            color: #2c3e50;
            font-weight: bold;
        }
 
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }
 
        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
        }
 
        th {
            background-color: #2c3e50;
            color: white;
        }
 
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
 
        .status-pending {
            color: orange;
            font-weight: bold;
        }
 
        .status-confirmed {
            color: green;
            font-weight: bold;
        }
    </style>
</head>
 
<body>
 
<a th:href="@{/admin/dashboard}" class="back-link">← Back to Admin</a>
 
<h2>Appointments List</h2>
 
<table>
    <thead>
       <!-- Inside the <thead> -->
<tr>
    <th>ID</th>
    <th>Patient ID</th>
    <th>Doctor Name</th> <!-- Updated for clarity -->
    <th>Date</th>
    <th>Time</th>
    <th>Status</th>
    <th>Actions</th> <!-- New Column -->
</tr>

<!-- Inside the <tbody> -->
<tr th:each="a : ${appointments}">
    <td th:text="${a.id}"></td>
    <td th:text="${a.patient != null ? a.patient.id : 'N/A'}"></td>
    <!-- Display Doctor Name instead of just ID -->
    <td th:text="${a.doctor != null ? a.doctor.name : 'Unassigned'}"></td>
    <td th:text="${a.appointmentDate != null ? #temporals.format(a.appointmentDate, 'dd-MM-yyyy') : 'N/A'}"></td>
    <td th:text="${a.timeSlot}"></td>
    <td th:classappend="${a.status == 'CONFIRMED'} ? 'status-confirmed' : 'status-pending'" th:text="${a.status}"></td>
    
    <td>
        <!-- Button to trigger the Assign Doctor page -->
        <a th:if="${a.doctor == null}" 
           th:href="@{/appointments/assign/{id}(id=${a.id})}" 
           style="background-color: #0077b6; color: white; padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 13px;">
           Assign
        </a>
        <span th:if="${a.doctor != null}" style="color: #27ae60; font-size: 13px;">✔ Assigned</span>
    </td>
</tr>
    </tbody>
</table>
 
</body>
</html>

 