<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Confirm Payment | Hospital Portal</title>
<link href="https://cdn.jsdelivr.net" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com">
<style>
    body { background-color: #f4f7fa; font-family: 'Inter', -apple-system, sans-serif; }
    
    /* Increased width for a more "substantial" feel (460px) */
    .hms-payment-card { 
        max-width: 460px; 
        margin: 60px auto; 
        background: #ffffff; 
        border-radius: 12px; 
        border: 1px solid #dee2e6; 
        box-shadow: 0 10px 25px rgba(0,0,0,0.05); 
        overflow: hidden;
    }
    
    .hms-header { 
        background: #005f8d; 
        color: #ffffff; 
        padding: 18px 24px; 
        font-size: 0.95rem; 
        font-weight: 700; 
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .hms-body { padding: 30px; }
    
    .fee-title { font-size: 0.8rem; font-weight: 700; color: #6c757d; text-transform: uppercase; letter-spacing: 0.5px; }
    .fee-value { font-size: 2.6rem; font-weight: 800; color: #005f8d; margin-bottom: 20px; }
    
    .data-strip { 
        border-top: 1px solid #edf2f7; 
        padding: 14px 0; 
        display: flex; 
        justify-content: space-between; 
        font-size: 1rem; 
    }
    .data-strip .label { color: #4a5568; }
    .data-strip .value { font-weight: 700; color: #1a202c; }

    .hms-alert { 
        background: #fff9db; 
        border: 1px solid #fff3bf;
        border-left: 4px solid #fab005;
        border-radius: 8px; 
        padding: 14px 18px; 
        font-size: 0.85rem; 
        color: #856404; 
        margin: 20px 0; 
        line-height: 1.5;
    }
    
    .btn-confirm-hms { 
        background: #0077b6; 
        color: white; 
        border: none; 
        width: 100%; 
        padding: 16px; 
        border-radius: 8px; 
        font-weight: 700; 
        font-size: 1rem;
        transition: 0.2s ease-in-out; 
    }
    .btn-confirm-hms:hover { background: #005f8d; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    
    .btn-cancel-hms { 
        display: block; 
        text-align: center; 
        margin-top: 18px; 
        color: #dc3545; 
        font-size: 0.85rem; 
        font-weight: 600; 
        text-decoration: none; 
        transition: 0.2s;
    }
    .btn-cancel-hms:hover { color: #a71d2a; text-decoration: underline; }
</style>
</head>
<body>

<div class="hms-payment-card">
    <div class="hms-header">
        <span>Payment Confirmation</span>
        <i class="fa-solid fa-user-shield"></i>
    </div>

    <div class="hms-body">
        <p class="fee-title mb-1">Consultation Fee Due</p>
        <div class="fee-value" th:text="'₹' + ${appointment.department?.consultationFee ?: '0.0'}">₹0.0</div>

        <div class="data-strip">
            <span class="label">Medical Department</span>
            <span class="value" th:text="${appointment.department?.deptName ?: 'N/A'}">Cardiology</span>
        </div>

        <form th:action="@{/patient/confirm-payment}" method="post">
            <input type="hidden" name="appointmentId" th:value="${appointment.id}" />
            <input type="hidden" name="amount" th:value="${appointment.department.consultationFee}" />
            <input type="hidden" name="paymentMethod" th:value="${payment.paymentMethod ?: 'UPI'}" />
            <input type="hidden" name="status" value="COMPLETED" />

            <div class="hms-alert">
                <i class="fa-solid fa-circle-exclamation me-2"></i>
                <strong>Attention:</strong> By clicking below, you confirm that you have completed the payment for this consultation.
            </div>

            <button type="submit" class="btn btn-confirm-hms shadow-sm">
                CONFIRM & COMPLETE BOOKING
            </button>
        </form>

        <a th:href="@{/patient/cancel-payment/{id}(id=${appointment.id})}" class="btn-cancel-hms">
            <i class="fa-solid fa-circle-xmark me-1"></i> Cancel & Delete Appointment
        </a>
    </div>
</div>

</body>
</html>
